# render.yaml — Blueprint para o frontend (static site) do monorepo
# baseado em: apps/web (rootDir), pnpm install --frozen-lockfile && pnpm build
previews:
  generation: automatic

services:
  - type: web
    name: sentiment-analyzer-web
    runtime: static                      # obrigatório para sites estáticos
    repo: https://github.com/adrianaaraujoc-lang/sentiment-analyzer
    branch: main
    rootDir: apps/web                    # pasta do frontend no monorepo
    buildCommand: pnpm install --frozen-lockfile && pnpm build
    staticPublishPath: apps/web/dist     # pasta que o build gera (ajuste se necessário)
    autoDeployTrigger: commit            # faz deploy a cada commit (substitui autoDeploy)
    previews:
      generation: automatic
    buildFilter:
      paths:
        - "apps/web/**"
      ignoredPaths:
        - "README.md"
    # Regras de headers e rotas úteis para SPA (fallback para index.html)
    headers:
      - path: /*
        name: Cache-Control
        value: public, max-age=0, must-revalidate
    routes:
      - type: rewrite
        source: /*
        destination: /index.html

    # Exemplo de variáveis de ambiente que podem ser lidas em build
    # (não exponha segredos aqui; use sync: false para valores secretos durante a criação do Blueprint)
    envVars:
      - key: VITE_APP_NAME
        value: "Sentiment Analyzer"
        sync: true